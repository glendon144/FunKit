{
  "id": 44,
  "title": "build_all_variants",
  "body": "# 0) sanity: make sure we're in the right folder\ntest -f main.py || { echo \"Run this from the repo root (main.py not found)\"; exit 1; }\n\n# 1) see which Python / PyInstaller we're using\npython3 -c \"import sys,PyInstaller; print('Python:',sys.executable); print('PyInstaller:',PyInstaller.__version__)\"\nwhich pyinstaller || true\n\n# 2) clean out previous artifacts\nrm -rf build dist\n\n# 3) build (one-dir) with excludes + hidden imports for Flask stack\npython3 -m PyInstaller --noconfirm --clean --log-level=DEBUG \\\n  --name funkit --onedir \\\n  --hidden-import flask --hidden-import jinja2 --hidden-import werkzeug --hidden-import markupsafe --hidden-import itsdangerous \\\n  --exclude-module torch --exclude-module torchvision --exclude-module torchaudio \\\n  --exclude-module tensorflow --exclude-module onnx --exclude-module onnxruntime \\\n  --exclude-module numba --exclude-module llvmlite \\\n  --exclude-module cv2 --exclude-module moviepy \\\n  --exclude-module matplotlib --exclude-module pandas --exclude-module pyarrow \\\n  --strip \\\n  main.py | tee build.log\n\n# 4) confirm output\necho \"---- dist contents ----\"; ls -lah dist\necho \"---- funkit artifact ----\"; ls -lah dist/funkit || true\n\n"
}