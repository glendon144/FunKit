{
  "id": 147,
  "title": "test_sidebar_buttons",
  "body": "import tkinter as tk\nimport pytest\n\n\n@pytest.fixture\ndef sidebar_app():\n    root = tk.Tk()\n    root.title(\"Sidebar-button test\")\n    root.geometry(\"300x250\")\n\n    sidebar_frame = tk.Frame(root, bg=\"#eeeeee\")\n    sidebar_frame.grid(row=0, column=0, sticky=\"ns\")\n    lb = tk.Listbox(sidebar_frame, width=20)\n    lb.grid(row=0, column=0, sticky=\"ns\")\n    for i in range(1, 6):\n        lb.insert(tk.END, f\"Doc {i}\")\n\n    btn_frame = tk.Frame(sidebar_frame, bg=\"#cccccc\")\n    btn_frame.grid(row=1, column=0, pady=8)\n\n    edit_clicked = {\"called\": False}\n    delete_clicked = {\"called\": False}\n\n    def on_edit():\n        edit_clicked[\"called\"] = True\n\n    def on_delete():\n        delete_clicked[\"called\"] = True\n\n    edit_button = tk.Button(btn_frame, text=\"Edit\", command=on_edit)\n    edit_button.pack(fill=tk.X)\n    delete_button = tk.Button(btn_frame, text=\"Delete\", command=on_delete)\n    delete_button.pack(fill=tk.X, pady=4)\n\n    editor = tk.Text(root, width=25)\n    editor.grid(row=0, column=1, sticky=\"nsew\")\n    root.grid_rowconfigure(0, weight=1)\n    root.grid_columnconfigure(1, weight=1)\n\n    root.update_idletasks()\n    root.update()\n\n    yield {\n        \"root\": root,\n        \"sidebar_frame\": sidebar_frame,\n        \"btn_frame\": btn_frame,\n        \"edit_button\": edit_button,\n        \"delete_button\": delete_button,\n        \"edit_clicked\": edit_clicked,\n        \"delete_clicked\": delete_clicked,\n    }\n\n    root.destroy()\n\n\ndef test_buttons_exist_under_sidebar(sidebar_app):\n    sidebar_frame = sidebar_app[\"sidebar_frame\"]\n    btn_frame = sidebar_app[\"btn_frame\"]\n    edit_button = sidebar_app[\"edit_button\"]\n    delete_button = sidebar_app[\"delete_button\"]\n\n    assert edit_button.winfo_exists()\n    assert delete_button.winfo_exists()\n    assert edit_button.master is btn_frame\n    assert delete_button.master is btn_frame\n    assert btn_frame.master is sidebar_frame\n\n\ndef test_button_callbacks(sidebar_app):\n    root = sidebar_app[\"root\"]\n    edit_button = sidebar_app[\"edit_button\"]\n    delete_button = sidebar_app[\"delete_button\"]\n    edit_clicked = sidebar_app[\"edit_clicked\"]\n    delete_clicked = sidebar_app[\"delete_clicked\"]\n\n    for button in (edit_button, delete_button):\n        button.event_generate(\"<Enter>\", x=1, y=1)\n        button.event_generate(\"<ButtonPress-1>\", x=1, y=1)\n        button.event_generate(\"<ButtonRelease-1>\", x=1, y=1)\n        root.update_idletasks()\n        root.update()\n\n    assert edit_clicked[\"called\"] is True\n    assert delete_clicked[\"called\"] is True\n"
}