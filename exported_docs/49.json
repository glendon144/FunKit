{
  "id": 49,
  "title": "build_python_with_tk",
  "body": "#!/bin/bash\nset -e\n\nPY_VERSION=\"3.12.3\"\nINSTALL_PREFIX=\"/usr/local\"\n\necho \"\ud83d\udd0d Step 1: Installing prerequisites...\"\nsudo apt update\nsudo apt install -y \\\n  build-essential \\\n  libncursesw5-dev \\\n  libreadline-dev \\\n  libssl-dev \\\n  libsqlite3-dev \\\n  libgdbm-dev \\\n  libc6-dev \\\n  libbz2-dev \\\n  libffi-dev \\\n  zlib1g-dev \\\n  liblzma-dev \\\n  uuid-dev \\\n  tk-dev \\\n  libx11-dev \\\n  libxext-dev \\\n  libxrender-dev \\\n  libxrandr-dev \\\n  libxcursor-dev \\\n  libxfixes-dev \\\n  libxinerama-dev \\\n  libxi-dev \\\n  libgl1-mesa-dev \\\n  wget \\\n  curl \\\n  x11-utils\n\necho \"\ud83d\udce6 Step 2: Downloading Python $PY_VERSION source...\"\ncd /usr/src\nsudo rm -rf Python-$PY_VERSION\nsudo wget https://www.python.org/ftp/python/$PY_VERSION/Python-$PY_VERSION.tgz\nsudo tar xvf Python-$PY_VERSION.tgz\ncd Python-$PY_VERSION\n\necho \"\u2699\ufe0f Step 3: Configuring build with tkinter support...\"\nsudo ./configure \\\n  --enable-optimizations \\\n  --with-ensurepip=install \\\n  --prefix=$INSTALL_PREFIX \\\n  > configure.log 2>&1\n\nif ! grep -i \"using tk\" configure.log; then\n  echo \"\u274c ERROR: Tkinter support not detected during configure. Check for tk.h.\"\n  echo \"\ud83d\udd0d Try: 'dpkg -L tk-dev | grep tk.h' to verify tk headers exist.\"\n  exit 1\nfi\n\necho \"\ud83e\uddf1 Step 4: Building Python (this may take a while)...\"\nsudo make -j$(nproc) > build.log 2>&1\n\necho \"\ud83d\udce5 Step 5: Installing Python $PY_VERSION...\"\nsudo make altinstall\n\necho \"\u2705 Step 6: Verifying tkinter support...\"\nPYBIN=\"$INSTALL_PREFIX/bin/python${PY_VERSION%.*}\"\n\nif ! \"$PYBIN\" -c \"import tkinter; print('Tkinter OK')\" 2>/dev/null; then\n  echo \"\u274c Tkinter not available in $PYBIN\"\n  echo \"\ud83d\udcc4 Check logs: configure.log and build.log\"\n  exit 1\nelse\n  echo \"\ud83c\udf89 SUCCESS: $PYBIN has tkinter support.\"\n  \"$PYBIN\" -m tkinter\nfi\n"
}